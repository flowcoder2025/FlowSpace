# Oracle Cloud Infrastructure - í†µí•© ì„œë²„ ë°°í¬ ê°€ì´ë“œ

> **ëª©ì **: LiveKit + Socket.ioë¥¼ Oracle Always Freeì— í†µí•© ë°°í¬í•˜ì—¬ ì¸í”„ë¼ ë¹„ìš© $0 ë‹¬ì„±
> **ì‘ì„±ì¼**: 2026-01-07
> **ìƒíƒœ**: âœ… ë°°í¬ ì™„ë£Œ (2026-01-09)
>
> **ìš´ì˜ ì¤‘ì¸ ì„œë²„**:
> - Socket.io: `https://space-socket.flow-coder.com`
> - LiveKit: `wss://space-livekit.flow-coder.com`
> - OCI IP: `144.24.72.143`

---

## 1. ê°œìš”

### 1.1 í˜„ì¬ ì¸í”„ë¼ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    í˜„ì¬ êµ¬ì¡° (ë¹„ìš© $0)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  Vercel  â”‚      â”‚      Oracle Always Free              â”‚    â”‚
â”‚   â”‚ Next.js  â”‚â”€â”€â”€â”€â”€â–¶â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚    â”‚
â”‚   â”‚   FREE   â”‚      â”‚   â”‚Socket.io â”‚   â”‚ LiveKit  â”‚       â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚  :3001   â”‚   â”‚  :7880   â”‚       â”‚    â”‚
â”‚                     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚    â”‚
â”‚                     â”‚       4 OCPU / 24GB RAM / $0         â”‚    â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚   ì˜ˆìƒ ì›” ë¹„ìš©: $0                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 Oracle Cloud ê³„ì • ì •ë³´

| í•­ëª© | ê°’ |
|-----|-----|
| **í…Œë„Œì‹œ** | kryou1 |
| **Plan Type** | Pay As You Go (PAYG) |
| **í™ˆ ë¦¬ì „** | ap-chuncheon-1 (ì¶˜ì²œ) |
| **ê²°ì œ ìˆ˜ë‹¨** | Credit Card ë“±ë¡ë¨ |
| **ìƒíƒœ** | Active |

---

## 2. ë¹„ìš© ë¶„ì„

### 2.1 í˜„ì¬ vs ëª©í‘œ ë¹„ìš© ë¹„êµ

**ê¸°ì¤€**: 1ê³µê°„ 50ëª… ë™ì‹œì ‘ì†, 10ì‹œ~19ì‹œ (9ì‹œê°„), ì›” 22ì¼ ì‚¬ìš©
- ì›” ì‚¬ìš©ëŸ‰: 594,000ë¶„ / 6.6TB

| ì„œë¹„ìŠ¤ | í˜„ì¬ (ì›”) | ëª©í‘œ (ì›”) | ì—°ê°„ ì ˆê° |
|--------|----------|----------|----------|
| **Vercel** (Next.js) | $0 | $0 | - |
| **Railway** (Socket.io) | $5-20 | $0 | **$60-240** |
| **LiveKit Cloud** | $272* | $0 | **$3,264** |
| **í•©ê³„** | $277-292 | **$0** | **$3,324-3,504** |

*LiveKit Cloud Ship í”Œëœ ($50 + ì´ˆê³¼ë¶„ $0.0005/ë¶„)

### 2.2 Oracle Always Free ë¦¬ì†ŒìŠ¤

| ë¦¬ì†ŒìŠ¤ | í•œë„ | FlowSpace ì˜ˆìƒ ì‚¬ìš©ëŸ‰ | ì—¬ìœ  |
|--------|------|---------------------|------|
| **CPU** | 4 OCPU | ~2.5 OCPU | âœ… ì—¬ìœ  |
| **ë©”ëª¨ë¦¬** | 24GB | ~6GB | âœ… ì—¬ìœ  |
| **ìŠ¤í† ë¦¬ì§€** | 200GB | ~50GB | âœ… ì—¬ìœ  |
| **íŠ¸ë˜í”½** | 10TB/ì›” | ê°€ë³€ | âš ï¸ ëª¨ë‹ˆí„°ë§ í•„ìš” |

### 2.3 ì„œë¹„ìŠ¤ë³„ ë¦¬ì†ŒìŠ¤ ì˜ˆìƒ

| ì„œë¹„ìŠ¤ | CPU | ë©”ëª¨ë¦¬ | ë¹„ê³  |
|--------|-----|--------|------|
| **Socket.io** | ~0.5 OCPU | ~512MB | ê²½ëŸ‰, ì´ë²¤íŠ¸ ê¸°ë°˜ |
| **LiveKit** | ~2 OCPU | ~4GB | ë¯¸ë””ì–´ ì²˜ë¦¬ |
| **Caddy** (SSL) | ~0.1 OCPU | ~128MB | ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ |
| **ì‹œìŠ¤í…œ** | ~0.4 OCPU | ~1GB | OS, Docker ë“± |
| **í•©ê³„** | **~3 OCPU** | **~6GB** | Always Free ë²”ìœ„ ë‚´ |

### 2.4 ê·œëª¨ë³„ ë¹„ìš© ì‹œë‚˜ë¦¬ì˜¤

**ê¸°ì¤€**: 50ëª…Ã—9ì‹œê°„Ã—22ì¼ = 1ê³µê°„ ë‹¨ìœ„

| ê·œëª¨ | ì›” ì‚¬ìš©ëŸ‰ | LiveKit Cloud | Oracle Self-hosted | ë¹„ê³  |
|------|----------|---------------|-------------------|------|
| **1ê³µê°„ (50ëª…)** | 594Kë¶„ / 6.6TB | $272/ì›” | **$0** | âœ… Always Free |
| **2ê³µê°„ (100ëª…)** | 1.19Më¶„ / 13.2TB | $500/ì›” | $32/ì›” | íŠ¸ë˜í”½ ì´ˆê³¼ |
| **3ê³µê°„ (150ëª…)** | 1.78Më¶„ / 19.8TB | $613/ì›” | $98/ì›” | íŠ¸ë˜í”½ ì´ˆê³¼ |
| **5ê³µê°„ (250ëª…)** | 2.97Më¶„ / 33TB | $1,088/ì›” | $230/ì›” | íŠ¸ë˜í”½ ì´ˆê³¼ |

> âš ï¸ **Oracle Always Free í•œê³„**: 1ê³µê°„ 50ëª…Ã—9ì‹œê°„ì´ ë¬´ë£Œ($0) ìµœëŒ€ì¹˜. 2ê³µê°„ë¶€í„° íŠ¸ë˜í”½ ì´ˆê³¼ ê³¼ê¸ˆ ë°œìƒ.

### 2.5 íŠ¸ë˜í”½ ë¹„ìš© ê³„ì‚°

```
1ì¸ë‹¹ ì˜ìƒ í†µí™” íŠ¸ë˜í”½ (ì˜ˆìƒ):
- ë¹„íŠ¸ë ˆì´íŠ¸: ~1.5 Mbps (720p)
- 1ì‹œê°„ ì‚¬ìš©: ~675MB
- 10TB í•œë„ë¡œ ê°€ëŠ¥í•œ ì‹œê°„: ~15,000ì‹œê°„/ì›”

ì˜ˆì‹œ ì‹œë‚˜ë¦¬ì˜¤:
- ì¼ í‰ê·  100ëª… Ã— 1ì‹œê°„ = 100ì‹œê°„/ì¼
- ì›” ì‚¬ìš©ëŸ‰: 100 Ã— 30 Ã— 0.675GB = ~2TB
- Always Free í•œë„(10TB) ë‚´ ì¶©ë¶„
```

---

## 3. ë°°í¬ ë°©ì‹ ë¹„êµ

### Option A: OCI CLI ì§ì ‘ ì‹¤í–‰
```
ë‚œì´ë„: â­â­â­ (ì¤‘ìƒ)
ì„¤ì¹˜ í•„ìš”: OCI CLI + API í‚¤ ì„¤ì •
ì¥ì : ë‹¨ê³„ë³„ í™•ì¸, ìŠ¤í¬ë¦½íŠ¸ ìë™í™” ê°€ëŠ¥
ë‹¨ì : ì´ˆê¸° ì„¤ì • ë³µì¡
```

### Option B: Terraform (ë¡œì»¬)
```
ë‚œì´ë„: â­â­â­ (ì¤‘ìƒ)
ì„¤ì¹˜ í•„ìš”: Terraform + OCI Provider
ì¥ì : ì¸í”„ë¼ë¥¼ ì½”ë“œë¡œ ê´€ë¦¬, ë²„ì „ ê´€ë¦¬ ê°€ëŠ¥
ë‹¨ì : í•™ìŠµ ê³¡ì„ 
```

### Option C: OCI Resource Manager (ì¶”ì²œ)
```
ë‚œì´ë„: â­ (ì‰¬ì›€)
ì„¤ì¹˜ í•„ìš”: ì—†ìŒ (ì›¹ ì½˜ì†”ë§Œ)
ì¥ì : .zip ì—…ë¡œë“œ â†’ Apply í´ë¦­ â†’ ë
ë‹¨ì : ë””ë²„ê¹…ì´ ì›¹ì—ì„œë§Œ ê°€ëŠ¥
```

### Option D: ì›¹ì½˜ì†” + cloud-init
```
ë‚œì´ë„: â­ (ì‰¬ì›€)
ì„¤ì¹˜ í•„ìš”: ì—†ìŒ
ì¥ì : GUIë¡œ ì§ê´€ì 
ë‹¨ì : ìˆ˜ë™ ë‹¨ê³„ ìˆìŒ
```

---

## 4. ë„ë©”ì¸ ì˜µì…˜

í†µí•© ì„œë²„ì—ëŠ” 2ê°œì˜ ì„œë¸Œë„ë©”ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.

### 4.1 ìì²´ ë„ë©”ì¸ ì‚¬ìš© (í˜„ì¬ ì„¤ì •)

```
space.flow-coder.com        â†’ Vercel (Next.js)
space-socket.flow-coder.com â†’ Oracle (Socket.io) - 144.24.72.143
space-livekit.flow-coder.com â†’ Oracle (LiveKit) - 144.24.72.143
```

**DNS ì„¤ì •**:
```
Type: A
Name: space-socket
Value: 144.24.72.143

Type: A
Name: space-livekit
Value: 144.24.72.143
```

### 4.2 ë¬´ë£Œ ë„ë©”ì¸ ì„œë¹„ìŠ¤

| ì„œë¹„ìŠ¤ | Socket.io URL | LiveKit URL |
|--------|--------------|-------------|
| **nip.io** | `socket.1.2.3.4.nip.io` | `livekit.1.2.3.4.nip.io` |
| **DuckDNS** | `flowspace-socket.duckdns.org` | `flowspace-lk.duckdns.org` |
| **sslip.io** | `socket.1-2-3-4.sslip.io` | `livekit.1-2-3-4.sslip.io` |

### 4.3 Cloudflare Tunnel (ë„ë©”ì¸ ì—†ì´)

```
ì¥ì : Public IP ë…¸ì¶œ ì—†ì´ HTTPS í„°ë„
ì„¤ì •: cloudflared ì„¤ì¹˜ â†’ í„°ë„ ìƒì„± â†’ ì„œë¹„ìŠ¤ ì—°ê²°
```

---

## 5. í†µí•© ë°°í¬ ê³„íš

### Phase 1: ì‚¬ì „ ì¤€ë¹„ (10ë¶„)

#### Step 1.1: ì˜ˆì‚° ì•Œë¦¼ ì„¤ì • (ê³¼ê¸ˆ ë°©ì§€)
```
OCI ì½˜ì†” â†’ â˜° â†’ Billing & Cost Management â†’ Budgets â†’ Create Budget
- Budget Amount: $1
- Alert at: 80%, 100%
```

#### Step 1.2: SSH í‚¤ ìƒì„± (Windows PowerShell)
```powershell
# í‚¤ ìƒì„±
ssh-keygen -t ed25519 -f $env:USERPROFILE\.ssh\flowspace-oci -N '""'

# ê³µê°œí‚¤ í™•ì¸ (ë³µì‚¬ìš©)
Get-Content $env:USERPROFILE\.ssh\flowspace-oci.pub
```

#### Step 1.3: Compartment OCID í™•ì¸
```
OCI ì½˜ì†” â†’ Identity & Security â†’ Compartments â†’ root compartment
â†’ OCID ë³µì‚¬ (ocid1.tenancy.oc1..aaaa...)
```

### Phase 2: ì¸í”„ë¼ ìƒì„± (15ë¶„)

#### Option C ì‚¬ìš© ì‹œ (Resource Manager)

1. **Terraform íŒŒì¼ ì¤€ë¹„** (Section 6 ì°¸ì¡°)
2. **ìŠ¤íƒ ìƒì„±**
   ```
   OCI ì½˜ì†” â†’ â˜° â†’ Developer Services â†’ Resource Manager â†’ Stacks
   â†’ Create Stack â†’ Upload .zip â†’ Configure Variables â†’ Apply
   ```
3. **ì¶œë ¥ í™•ì¸**: Public IP, SSH ëª…ë ¹ì–´

### Phase 3: ì„œë²„ ì„¤ì • (20ë¶„)

#### Step 3.1: SSH ì ‘ì†
```bash
ssh -i ~/.ssh/flowspace-oci ubuntu@[PUBLIC_IP]
```

#### Step 3.2: í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ ìƒì„±
```bash
mkdir -p ~/flowspace && cd ~/flowspace
```

#### Step 3.3: Socket.io ì„œë²„ ì½”ë“œ ë°°í¬

**server/package.json** (ë¡œì»¬ì—ì„œ ë³µì‚¬ ë˜ëŠ” git clone):
```bash
# Option 1: Gitìœ¼ë¡œ ì „ì²´ í”„ë¡œì íŠ¸ í´ë¡ 
git clone https://github.com/your-repo/flow_metaverse.git
cd flow_metaverse/server

# Option 2: í•„ìš”í•œ íŒŒì¼ë§Œ SCPë¡œ ë³µì‚¬
scp -i ~/.ssh/flowspace-oci -r ./server ubuntu@[PUBLIC_IP]:~/flowspace/
```

#### Step 3.4: Docker Compose ì„¤ì • íŒŒì¼ ìƒì„±

**~/flowspace/docker-compose.yml**:
```yaml
version: '3.8'

services:
  # ============================================
  # Socket.io ì„œë²„ (ê²Œì„ ë™ê¸°í™”, ì±„íŒ…)
  # ============================================
  socket-server:
    build:
      context: ./server
      dockerfile: Dockerfile
    container_name: flowspace-socket
    restart: unless-stopped
    ports:
      - "3001:3001"
    environment:
      - NODE_ENV=production
      - PORT=3001
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3001/health"]
      interval: 30s
      timeout: 10s
      retries: 3

  # ============================================
  # LiveKit ì„œë²„ (ì˜ìƒ/ìŒì„± í†µí™”)
  # ============================================
  livekit:
    image: livekit/livekit-server:latest
    container_name: flowspace-livekit
    command: --config /etc/livekit.yaml
    restart: unless-stopped
    network_mode: host
    volumes:
      - ./livekit/livekit.yaml:/etc/livekit.yaml:ro

  # ============================================
  # Caddy (SSL ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ)
  # ============================================
  caddy:
    image: caddy:latest
    container_name: flowspace-caddy
    restart: unless-stopped
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./caddy/Caddyfile:/etc/caddy/Caddyfile:ro
      - caddy_data:/data
      - caddy_config:/config
    depends_on:
      - socket-server
      - livekit

volumes:
  caddy_data:
  caddy_config:
```

#### Step 3.5: Socket.io Dockerfile

**~/flowspace/server/Dockerfile**:
```dockerfile
FROM node:20-alpine

WORKDIR /app

# ì˜ì¡´ì„± ì„¤ì¹˜
COPY package*.json ./
RUN npm ci --only=production

# ì†ŒìŠ¤ ë³µì‚¬
COPY . .

# Health checkìš© curl ì„¤ì¹˜
RUN apk add --no-cache curl

EXPOSE 3001

CMD ["node", "socket-server.js"]
```

#### Step 3.6: LiveKit ì„¤ì •

**~/flowspace/livekit/livekit.yaml**:
```yaml
port: 7880
rtc:
  port_range_start: 50000
  port_range_end: 60000
  use_external_ip: true
  tcp_port: 7881
keys:
  # API Key: Secret í˜•ì‹
  # ì•„ë˜ ëª…ë ¹ìœ¼ë¡œ ìƒì„±: docker run --rm livekit/livekit-server generate-keys
  APIFlowspace: <YOUR_GENERATED_SECRET>
turn:
  enabled: true
  udp_port: 3478
  tcp_port: 3478
logging:
  level: info
  json: false
```

#### Step 3.7: Caddy ì„¤ì • (SSL ìë™)

**~/flowspace/caddy/Caddyfile**:
```
# Socket.io (WebSocket ì§€ì›)
space-socket.flow-coder.com {
    reverse_proxy localhost:3001 {
        header_up Host {host}
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
        header_up Connection {>Connection}
        header_up Upgrade {>Upgrade}
    }
}

# LiveKit
space-livekit.flow-coder.com {
    reverse_proxy localhost:7880 {
        header_up Host {host}
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
        header_up Connection {>Connection}
        header_up Upgrade {>Upgrade}
    }
}
```

> ğŸ“ ì‹¤ì œ Caddyfile: `/terraform/flowspace-stack/caddy/Caddyfile` ì°¸ì¡°

#### Step 3.8: ì„œë¹„ìŠ¤ ì‹œì‘
```bash
cd ~/flowspace
docker-compose up -d

# ë¡œê·¸ í™•ì¸
docker-compose logs -f
```

### Phase 4: FlowSpace ì—°ë™ (10ë¶„)

#### Step 4.1: LiveKit API í‚¤ ìƒì„±
```bash
docker run --rm livekit/livekit-server generate-keys
```

ì¶œë ¥:
```
API Key: APIFlowspace
API Secret: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

#### Step 4.2: í™˜ê²½ë³€ìˆ˜ ì—…ë°ì´íŠ¸

**.env.production** (ë¡œì»¬):
```env
# Socket.io - Oracle Cloud
NEXT_PUBLIC_SOCKET_URL="https://space-socket.flow-coder.com"

# LiveKit - Oracle Cloud Self-hosted
NEXT_PUBLIC_LIVEKIT_URL="wss://space-livekit.flow-coder.com"
LIVEKIT_API_KEY="APIFlowspace"
LIVEKIT_API_SECRET="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
```

#### Step 4.3: Vercel í™˜ê²½ë³€ìˆ˜ ì—…ë°ì´íŠ¸
```
Vercel Dashboard â†’ Project â†’ Settings â†’ Environment Variables
â†’ ìœ„ 3ê°œ ê°’ ì¶”ê°€/ìˆ˜ì •
```

#### Step 4.4: ì¬ë°°í¬
```bash
vercel --prod
```

### Phase 5: ê²€ì¦ (5ë¶„)

#### Step 5.1: ì„œë²„ ìƒíƒœ í™•ì¸
```bash
# Socket.io
curl https://space-socket.flow-coder.com/health

# LiveKit
curl https://space-livekit.flow-coder.com
```

#### Step 5.2: FlowSpace í…ŒìŠ¤íŠ¸
1. ê³µê°„ ì…ì¥
2. ìºë¦­í„° ì´ë™ (Socket.io í™•ì¸)
3. ì±„íŒ… ì „ì†¡ (Socket.io í™•ì¸)
4. ì˜ìƒ/ìŒì„± í™œì„±í™” (LiveKit í™•ì¸)
5. ë‹¤ë¥¸ ê¸°ê¸°ì—ì„œ ë™ì‹œ ì ‘ì†

---

## 6. Terraform ì½”ë“œ (Resource Managerìš©)

### 6.1 íŒŒì¼ êµ¬ì¡°
```
flowspace-stack/
â”œâ”€â”€ main.tf
â”œâ”€â”€ variables.tf
â”œâ”€â”€ outputs.tf
â””â”€â”€ cloud-init.yaml
```

### 6.2 main.tf
```hcl
terraform {
  required_providers {
    oci = {
      source  = "oracle/oci"
      version = ">= 5.0.0"
    }
  }
}

provider "oci" {
  region = var.region
}

# Availability Domain
data "oci_identity_availability_domains" "ads" {
  compartment_id = var.compartment_id
}

# Ubuntu ARM ì´ë¯¸ì§€
data "oci_core_images" "ubuntu_arm" {
  compartment_id           = var.compartment_id
  operating_system         = "Canonical Ubuntu"
  operating_system_version = "22.04"
  shape                    = "VM.Standard.A1.Flex"
  sort_by                  = "TIMECREATED"
  sort_order               = "DESC"
}

# VCN
resource "oci_core_vcn" "flowspace_vcn" {
  compartment_id = var.compartment_id
  cidr_blocks    = ["10.0.0.0/16"]
  display_name   = "flowspace-vcn"
  dns_label      = "flowspacevcn"
}

# Internet Gateway
resource "oci_core_internet_gateway" "flowspace_igw" {
  compartment_id = var.compartment_id
  vcn_id         = oci_core_vcn.flowspace_vcn.id
  display_name   = "flowspace-igw"
  enabled        = true
}

# Route Table
resource "oci_core_route_table" "flowspace_rt" {
  compartment_id = var.compartment_id
  vcn_id         = oci_core_vcn.flowspace_vcn.id
  display_name   = "flowspace-rt"

  route_rules {
    destination       = "0.0.0.0/0"
    network_entity_id = oci_core_internet_gateway.flowspace_igw.id
  }
}

# Security List (í†µí•© í¬íŠ¸)
resource "oci_core_security_list" "flowspace_sl" {
  compartment_id = var.compartment_id
  vcn_id         = oci_core_vcn.flowspace_vcn.id
  display_name   = "flowspace-security-list"

  # Egress: All
  egress_security_rules {
    destination = "0.0.0.0/0"
    protocol    = "all"
  }

  # SSH (22)
  ingress_security_rules {
    protocol = "6"
    source   = "0.0.0.0/0"
    tcp_options { min = 22; max = 22 }
  }

  # HTTP (80)
  ingress_security_rules {
    protocol = "6"
    source   = "0.0.0.0/0"
    tcp_options { min = 80; max = 80 }
  }

  # HTTPS (443)
  ingress_security_rules {
    protocol = "6"
    source   = "0.0.0.0/0"
    tcp_options { min = 443; max = 443 }
  }

  # Socket.io (3001)
  ingress_security_rules {
    protocol = "6"
    source   = "0.0.0.0/0"
    tcp_options { min = 3001; max = 3001 }
  }

  # LiveKit API (7880)
  ingress_security_rules {
    protocol = "6"
    source   = "0.0.0.0/0"
    tcp_options { min = 7880; max = 7880 }
  }

  # LiveKit RTC TCP (7881)
  ingress_security_rules {
    protocol = "6"
    source   = "0.0.0.0/0"
    tcp_options { min = 7881; max = 7881 }
  }

  # LiveKit RTC UDP (50000-60000)
  ingress_security_rules {
    protocol = "17"
    source   = "0.0.0.0/0"
    udp_options { min = 50000; max = 60000 }
  }

  # TURN (3478 UDP/TCP)
  ingress_security_rules {
    protocol = "17"
    source   = "0.0.0.0/0"
    udp_options { min = 3478; max = 3478 }
  }
  ingress_security_rules {
    protocol = "6"
    source   = "0.0.0.0/0"
    tcp_options { min = 3478; max = 3478 }
  }
}

# Subnet
resource "oci_core_subnet" "flowspace_subnet" {
  compartment_id    = var.compartment_id
  vcn_id            = oci_core_vcn.flowspace_vcn.id
  cidr_block        = "10.0.1.0/24"
  display_name      = "flowspace-subnet"
  dns_label         = "flowspacesub"
  route_table_id    = oci_core_route_table.flowspace_rt.id
  security_list_ids = [oci_core_security_list.flowspace_sl.id]
}

# Compute Instance (ARM - Always Free)
resource "oci_core_instance" "flowspace_server" {
  compartment_id      = var.compartment_id
  availability_domain = data.oci_identity_availability_domains.ads.availability_domains[0].name
  display_name        = "flowspace-server"
  shape               = "VM.Standard.A1.Flex"

  shape_config {
    ocpus         = var.instance_ocpus
    memory_in_gbs = var.instance_memory_gb
  }

  source_details {
    source_type = "image"
    source_id   = data.oci_core_images.ubuntu_arm.images[0].id
  }

  create_vnic_details {
    subnet_id        = oci_core_subnet.flowspace_subnet.id
    assign_public_ip = true
    display_name     = "flowspace-vnic"
  }

  metadata = {
    ssh_authorized_keys = var.ssh_public_key
    user_data           = base64encode(file("${path.module}/cloud-init.yaml"))
  }

  freeform_tags = {
    "always-free" = "true"
    "project"     = "flowspace"
  }
}
```

### 6.3 variables.tf
```hcl
variable "compartment_id" {
  description = "OCI Compartment OCID"
  type        = string
}

variable "region" {
  description = "OCI Region"
  type        = string
  default     = "ap-chuncheon-1"
}

variable "ssh_public_key" {
  description = "SSH Public Key"
  type        = string
}

variable "instance_ocpus" {
  description = "OCPUs (Always Free max: 4)"
  type        = number
  default     = 4
}

variable "instance_memory_gb" {
  description = "Memory GB (Always Free max: 24)"
  type        = number
  default     = 24
}
```

### 6.4 outputs.tf
```hcl
output "public_ip" {
  description = "Server Public IP"
  value       = oci_core_instance.flowspace_server.public_ip
}

output "ssh_command" {
  description = "SSH Command"
  value       = "ssh -i ~/.ssh/flowspace-oci ubuntu@${oci_core_instance.flowspace_server.public_ip}"
}

output "next_steps" {
  description = "Next Steps"
  value       = <<-EOT
    1. SSH ì ‘ì†: ssh -i ~/.ssh/flowspace-oci ubuntu@${oci_core_instance.flowspace_server.public_ip}
    2. í”„ë¡œì íŠ¸ ì„¤ì •: OCI.mdì˜ Phase 3 ì°¸ì¡°
    3. ì„œë¹„ìŠ¤ ì‹œì‘: docker-compose up -d
  EOT
}
```

### 6.5 cloud-init.yaml
```yaml
#cloud-config
package_update: true
package_upgrade: true

packages:
  - docker.io
  - docker-compose
  - git
  - curl
  - vim
  - htop

runcmd:
  # Docker ì„¤ì •
  - systemctl start docker
  - systemctl enable docker
  - usermod -aG docker ubuntu

  # í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬
  - mkdir -p /home/ubuntu/flowspace/{server,livekit,caddy}
  - chown -R ubuntu:ubuntu /home/ubuntu/flowspace

  # iptables ì„¤ì •
  - iptables -I INPUT -p tcp --dport 22 -j ACCEPT
  - iptables -I INPUT -p tcp --dport 80 -j ACCEPT
  - iptables -I INPUT -p tcp --dport 443 -j ACCEPT
  - iptables -I INPUT -p tcp --dport 3001 -j ACCEPT
  - iptables -I INPUT -p tcp --dport 7880 -j ACCEPT
  - iptables -I INPUT -p tcp --dport 7881 -j ACCEPT
  - iptables -I INPUT -p udp --dport 50000:60000 -j ACCEPT
  - iptables -I INPUT -p udp --dport 3478 -j ACCEPT
  - iptables -I INPUT -p tcp --dport 3478 -j ACCEPT

  # ì™„ë£Œ í‘œì‹œ
  - echo "FlowSpace server ready!" > /home/ubuntu/setup-complete.txt

final_message: "Cloud-init completed in $UPTIME seconds"
```

---

## 7. ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë°°í¬ ì „
- [x] ì˜ˆì‚° ì•Œë¦¼ ì„¤ì • ($1)
- [x] SSH í‚¤ ìƒì„±
- [x] Compartment OCID í™•ì¸
- [x] ë„ë©”ì¸ ê²°ì • (space-socket.flow-coder.com, space-livekit.flow-coder.com)

### ë°°í¬
- [x] Terraform Apply ì™„ë£Œ
- [x] Public IP í™•ì¸ (144.24.72.143)
- [x] SSH ì ‘ì† í™•ì¸
- [x] Docker ë™ì‘ í™•ì¸

### ì„œë¹„ìŠ¤ ì„¤ì •
- [x] docker-compose.yml ìƒì„±
- [x] Socket.io Dockerfile ìƒì„±
- [x] livekit.yaml ìƒì„±
- [x] Caddyfile ìƒì„± (Cloudflare Origin Certificate + @websocket ë§¤ì²˜)
- [x] docker-compose up -d

### DNS & SSL
- [x] DNS A ë ˆì½”ë“œ ì„¤ì • (Cloudflare â†’ 144.24.72.143)
- [x] SSL ì„¤ì • ì™„ë£Œ (Cloudflare Origin Certificate, Full Strict ëª¨ë“œ)

### FlowSpace ì—°ë™
- [x] .env.production ì—…ë°ì´íŠ¸
- [x] Vercel í™˜ê²½ë³€ìˆ˜ ì—…ë°ì´íŠ¸ (konarae/flowspace)
- [x] Vercel ì¬ë°°í¬
- [x] í†µí•© í…ŒìŠ¤íŠ¸ ì™„ë£Œ (2026-01-09)

---

## 8. ë¬¸ì œ í•´ê²°

### Out of capacity ì˜¤ë¥˜
```
í•´ê²°: AD(Availability Domain) ë³€ê²½ ë˜ëŠ” ì ì‹œ í›„ ì¬ì‹œë„
Terraform: availability_domain ì¸ë±ìŠ¤ ë³€ê²½ [0] â†’ [1]
```

### SSH ì ‘ì† ë¶ˆê°€
```bash
# Security List í™•ì¸
OCI ì½˜ì†” â†’ Networking â†’ VCN â†’ Security Lists â†’ Port 22

# ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ í™•ì¸
OCI ì½˜ì†” â†’ Compute â†’ Instances â†’ RUNNING í™•ì¸
```

### Docker ê¶Œí•œ ì˜¤ë¥˜
```bash
# ubuntu ìœ ì €ë¥¼ docker ê·¸ë£¹ì— ì¶”ê°€
sudo usermod -aG docker ubuntu
# ì¬ë¡œê·¸ì¸ í•„ìš”
exit && ssh -i ~/.ssh/flowspace-oci ubuntu@[IP]
```

### SSL ì¸ì¦ì„œ ì‹¤íŒ¨
```bash
# DNS ì „íŒŒ í™•ì¸
dig space-socket.flow-coder.com
dig space-livekit.flow-coder.com

# Caddy ë¡œê·¸
docker-compose logs caddy
```

### WebSocket 400 Bad Request (Cloudflare ê²½ìœ  ì‹œ)

**ë¬¸ì œ**: Cloudflare í”„ë¡ì‹œë¥¼ í†µí•´ WebSocket ì—°ê²° ì‹œ `400 Bad Request` ë°˜í™˜
**ì›ì¸**: Cloudflareê°€ HTTP/2 â†’ HTTP/1.1 ë³€í™˜ ì‹œ `Connection: Upgrade` í—¤ë”ê°€ ì†ì‹¤ë¨

**í•´ê²°**: Caddyfileì— `@websocket` ë§¤ì²˜ ì‚¬ìš©

```
# âŒ ì˜ëª»ëœ ì„¤ì • (í—¤ë” ìˆ˜ë™ ì „ë‹¬ - ì‘ë™ ì•ˆí•¨)
reverse_proxy socket-server:3001 {
    header_up Connection {>Connection}
    header_up Upgrade {>Upgrade}
}

# âœ… ì˜¬ë°”ë¥¸ ì„¤ì • (@websocket ë§¤ì²˜ ì‚¬ìš©)
@websocket {
    header Connection *Upgrade*
    header Upgrade websocket
}
reverse_proxy @websocket socket-server:3001 {
    header_up Host {host}
    header_up X-Forwarded-Proto https
}
reverse_proxy socket-server:3001 {
    header_up Host {host}
    header_up X-Forwarded-Proto https
}
```

**ê²€ì¦**:
```bash
# polling í…ŒìŠ¤íŠ¸ (HTTP)
curl https://space-socket.flow-coder.com/socket.io/?EIO=4&transport=polling

# WebSocket í…ŒìŠ¤íŠ¸ (101 Switching Protocols í™•ì¸)
curl -v "https://space-socket.flow-coder.com/socket.io/?EIO=4&transport=websocket" \
  -H "Connection: Upgrade" -H "Upgrade: websocket" \
  -H "Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==" \
  -H "Sec-WebSocket-Version: 13"
```

### LiveKit ì—°ê²° ì‹¤íŒ¨
```bash
# í¬íŠ¸ í™•ì¸
sudo netstat -tlnp | grep -E "7880|7881"

# ë¡œê·¸ í™•ì¸
docker-compose logs livekit
```

---

## 9. ìƒì—…í™” ë¹„ìš© ë¹„êµ

### 9.1 LiveKit Cloud vs Self-hosted

**ê¸°ì¤€**: 1ê³µê°„ 50ëª…Ã—9ì‹œê°„Ã—22ì¼ (594,000ë¶„/ì›”, 6.6TB/ì›”)

| í•­ëª© | LiveKit Cloud | Self-hosted (Oracle) |
|------|--------------|---------------------|
| **ë¬´ë£Œ í•œë„** | WebRTC 5,000ë¶„/ì›” | 10TB/ì›” íŠ¸ë˜í”½ |
| **1ê³µê°„ (50ëª…Ã—9ì‹œê°„)** | $272/ì›” | **$0** |
| **2ê³µê°„ (100ëª…)** | $500/ì›” | $32/ì›” |
| **3ê³µê°„ (150ëª…)** | $613/ì›” | $98/ì›” |
| **ê´€ë¦¬ ë¶€ë‹´** | ì—†ìŒ | ì§ì ‘ ìš´ì˜ |
| **SLA** | 99.9% | ì—†ìŒ |
| **ë°ì´í„° ìœ„ì¹˜** | í•´ì™¸ | í•œêµ­ (ì¶˜ì²œ) |

> âš ï¸ **Oracle ë¬´ë£Œ í•œê³„**: 1ê³µê°„ë§Œ $0, 2ê³µê°„ë¶€í„° íŠ¸ë˜í”½ ì´ˆê³¼ ê³¼ê¸ˆ

### 9.2 Railway vs Oracle (Socket.io)

| í•­ëª© | Railway | Oracle |
|------|---------|--------|
| **ë¬´ë£Œ í•œë„** | $5/ì›” í¬ë ˆë”§ | ë¬´ì œí•œ |
| **ì˜ˆìƒ ë¹„ìš©** | $5-20/ì›” | $0 |
| **ìŠ¤ì¼€ì¼ë§** | ìë™ | ìˆ˜ë™ |
| **ë°°í¬** | Git push | ìˆ˜ë™/ìŠ¤í¬ë¦½íŠ¸ |

### 9.3 ì´ ë¹„ìš© ì ˆê° íš¨ê³¼

**ê¸°ì¤€**: 1ê³µê°„ 50ëª…Ã—9ì‹œê°„Ã—22ì¼

| ê·œëª¨ | LiveKit Cloud | Oracle | ì—°ê°„ ì ˆê° |
|------|---------------|--------|----------|
| **1ê³µê°„ (50ëª…)** | $272/ì›” | **$0** | **$3,264** |
| **2ê³µê°„ (100ëª…)** | $500/ì›” | $32/ì›” | **$5,616** |
| **3ê³µê°„ (150ëª…)** | $613/ì›” | $98/ì›” | **$6,180** |
| **5ê³µê°„ (250ëª…)** | $1,088/ì›” | $230/ì›” | **$10,296** |

> ğŸ’¡ **ë³µí•© ìš´ì˜**: 1ê³µê°„ ìƒì‹œ ìš´ì˜ + ì´ë²¤íŠ¸(100ëª…Ã—2ì‹œê°„Ã—ì›”8íšŒ)ë„ ë¬´ë£Œ ë²”ìœ„ ë‚´ ê°€ëŠ¥

### 9.4 ë¼ì´ì„ ìŠ¤

| í•­ëª© | ë¼ì´ì„ ìŠ¤ | ìƒì—…ì  ì‚¬ìš© |
|------|---------|------------|
| LiveKit Server | Apache 2.0 | **í—ˆìš©** |
| Oracle Always Free | Oracle ì•½ê´€ | **í—ˆìš©** |
| Socket.io | MIT | **í—ˆìš©** |

---

## 10. ë‹¤ìŒ ë‹¨ê³„

### í•„ìš”í•œ ê²°ì • ì‚¬í•­

#### 1. ë°°í¬ ë°©ì‹
```
[ ] Option C: Resource Manager (ì¶”ì²œ)
[ ] Option D: ì›¹ì½˜ì†” + cloud-init
```

#### 2. ë„ë©”ì¸
```
[ ] ìì²´ ë„ë©”ì¸ ë³´ìœ  â†’ ì„œë¸Œë„ë©”ì¸ ì‚¬ìš©
[ ] ë¬´ë£Œ ë„ë©”ì¸ ì„œë¹„ìŠ¤ (nip.io / DuckDNS)
```

### ê²°ì • í›„ ì§„í–‰

ìœ„ 2ê°€ì§€ê°€ ê²°ì •ë˜ë©´:
1. Terraform íŒŒì¼ .zip ìƒì„± ë˜ëŠ” ì›¹ì½˜ì†” ê°€ì´ë“œ ì œê³µ
2. ë‹¨ê³„ë³„ ë°°í¬ ì§„í–‰
3. FlowSpace ì—°ë™ ì™„ë£Œ

---

## 11. Vercel ë°°í¬ ì •ë³´

### 11.1 í”„ë¡œì íŠ¸ êµ¬ì¡°

| í•­ëª© | ê°’ |
|-----|-----|
| **Vercel Team** | flowcoder (FlowCoder) |
| **í”„ë¡œì íŠ¸ëª…** | flowspace |
| **Primary Domain** | https://space.flow-coder.com |
| **Vercel Alias** | flowspace-gamma.vercel.app |

### 11.2 í™˜ê²½ ë³€ìˆ˜ (Production)

```bash
# í•„ìˆ˜ LiveKit í™˜ê²½ë³€ìˆ˜
NEXT_PUBLIC_LIVEKIT_URL=wss://space-livekit.flow-coder.com  # í´ë¼ì´ì–¸íŠ¸ WebSocket
LIVEKIT_URL=https://space-livekit.flow-coder.com            # ì„œë²„ HTTP API (í† í° ë°œê¸‰ìš©)
LIVEKIT_API_KEY=APIckbN3jsUGFhP
LIVEKIT_API_SECRET=***

# Socket.io
NEXT_PUBLIC_SOCKET_URL=https://space-socket.flow-coder.com
```

> âš ï¸ **ì£¼ì˜**: `LIVEKIT_URL`ì€ ì„œë²„ ì‚¬ì´ë“œì—ì„œ í† í° ë°œê¸‰ ì‹œ ì‚¬ìš©. `NEXT_PUBLIC_LIVEKIT_URL`ê³¼ ë³„ê°œ.

### 11.3 Vercel CLI ëª…ë ¹ì–´

```bash
# í”„ë¡œì íŠ¸ ì—°ê²° (konarae íŒ€ì˜ flowspace)
vercel link --yes --project flowspace --scope flowcoder

# í™˜ê²½ë³€ìˆ˜ í™•ì¸
vercel env ls --scope flowcoder

# í™˜ê²½ë³€ìˆ˜ ì¶”ê°€ (production)
echo "value" | vercel env add VAR_NAME production --scope flowcoder

# í”„ë¡œë•ì…˜ ë°°í¬
vercel --prod --yes

# ë°°í¬ í™•ì¸
vercel ls
```

### 11.4 ë„ë©”ì¸ ì„¤ì •

**í˜„ì¬ ì„¤ì •**:
- `space.flow-coder.com` â†’ Primary domain (í”„ë¡œë•ì…˜ ì‚¬ìš©)
- `flowspace-gamma.vercel.app` â†’ Vercel alias (ë ˆê±°ì‹œ, ë¦¬ë‹¤ì´ë ‰íŠ¸ ì„¤ì •ë¨)

**vercel.json ë¦¬ë‹¤ì´ë ‰íŠ¸**:
```json
{
  "redirects": [
    {
      "source": "/:path*",
      "has": [{ "type": "host", "value": "flowspace-gamma.vercel.app" }],
      "destination": "https://space.flow-coder.com/:path*",
      "permanent": true
    }
  ]
}
```

> âš ï¸ **ì•Œë ¤ì§„ ì œí•œ**: Vercel alias ë„ë©”ì¸ì—ì„œëŠ” í˜¸ìŠ¤íŠ¸ ê¸°ë°˜ ë¦¬ë‹¤ì´ë ‰íŠ¸ê°€ ì‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ.

---

## 12. ëª¨ë‹ˆí„°ë§ ì•„í‚¤í…ì²˜

> **ëª©ì **: OCI ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ë° ë¹„ìš© ëª¨ë‹ˆí„°ë§
> **êµ¬í˜„ ìƒíƒœ**: âœ… ì™„ë£Œ (2026-01-09)

### 12.1 2íŠ¸ë™ ëª¨ë‹ˆí„°ë§ ì „ëµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ëª¨ë‹ˆí„°ë§ ì•„í‚¤í…ì²˜                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   íŠ¸ë™ 1: ìš´ì˜ ì§€í‘œ (ì‹¤ì‹œê°„)          íŠ¸ë™ 2: ë¹„ìš© (ì •ì‚°ìš©)        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ OCI Monitoring API  â”‚           â”‚ OCI Usage API       â”‚    â”‚
â”‚   â”‚ - CPU ì‚¬ìš©ë¥         â”‚           â”‚ - ì‹¤ì œ ì²­êµ¬ ë¹„ìš©    â”‚    â”‚
â”‚   â”‚ - ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥      â”‚           â”‚ - SKUë³„ ë¶„í•´        â”‚    â”‚
â”‚   â”‚ - ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½   â”‚           â”‚ (í–¥í›„ êµ¬í˜„ ì˜ˆì •)    â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚   íŠ¸ë™ 1.5: ìŠ¤í† ë¦¬ì§€                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ í• ë‹¹ëŸ‰: Block Volume API    â”‚  ì‚¬ìš©ëŸ‰: ì„œë²„ df        â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.2 ë°ì´í„° ì†ŒìŠ¤ë³„ ì—­í• 

| ë©”íŠ¸ë¦­ | ë°ì´í„° ì†ŒìŠ¤ | ìš©ë„ |
|--------|------------|------|
| **CPU** | OCI Monitoring API | ì‹¤ì‹œê°„ ì‚¬ìš©ë¥  |
| **ë©”ëª¨ë¦¬** | OCI Monitoring API | ì‹¤ì‹œê°„ ì‚¬ìš©ë¥  |
| **íŠ¸ë˜í”½** | OCI Monitoring API (rate()) | ì›” ëˆ„ì  + ì˜ˆì¸¡ |
| **ìŠ¤í† ë¦¬ì§€ í• ë‹¹ëŸ‰** | Block Volume API | Boot Volume í¬ê¸° |
| **ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©ëŸ‰** | Socket ì„œë²„ df | ì‹¤ì œ ì‚¬ìš©ëŸ‰ |
| **ë¹„ìš©** | í•œë„ ê¸°ë°˜ ì¶”ì • | ë¬´ë£Œ ë²”ìœ„ ì´ˆê³¼ ì˜ˆì¸¡ |

### 12.3 Socket ì„œë²„ /metrics ì—”ë“œí¬ì¸íŠ¸

```
GET http://144.24.72.143:3001/metrics

Response (v2.0.0):
{
  "server": "socket.io",
  "version": "2.0.0",
  "storage": {
    "totalGB": 44.96,      // df ê¸°ë°˜ ì´ í¬ê¸°
    "usedGB": 4.61,        // df ê¸°ë°˜ ì‚¬ìš©ëŸ‰
    "availableGB": 40.33,  // df ê¸°ë°˜ ì—¬ìœ 
    "usedPercent": 10,
    "mountPoint": "/"
  },
  "connections": { ... },
  "parties": { ... }
}
```

### 12.4 Admin ëŒ€ì‹œë³´ë“œ API

```
GET /api/admin/oci-metrics

ë¦¬ì†ŒìŠ¤ë³„ ì†ŒìŠ¤ í‘œì‹œ:
- CPU/ë©”ëª¨ë¦¬: "OCI Monitoring API"
- íŠ¸ë˜í”½: "OCI Monitoring API" (ì›”ì´ˆ~í˜„ì¬ ëˆ„ì )
- ìŠ¤í† ë¦¬ì§€ í• ë‹¹ëŸ‰: "Block Volume API"
- ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©ëŸ‰: "ì„œë²„ df"
- ë¹„ìš©: "ì¶”ì •ì¹˜ (í•œë„ ê¸°ë°˜ ê³„ì‚°)"
```

### 12.5 í–¥í›„ ê³„íš

- [ ] **Usage API ì—°ë™**: ì‹¤ì œ ì²­êµ¬ ë¹„ìš© ($0 í¬í•¨) í‘œì‹œ
- [ ] **Cost Report CSV**: ì •ì‚°/ê°ì‚¬ìš© ìë™ ì €ì¥
- [ ] **ì•Œë¦¼ ì‹œìŠ¤í…œ**: íŠ¸ë˜í”½ 80%/100% ë„ë‹¬ ì‹œ Discord ì•Œë¦¼

---

## 13. ë³€ê²½ ì´ë ¥

| ë‚ ì§œ | ë‚´ìš© |
|------|------|
| 2026-01-07 | ì´ˆê¸° ë¬¸ì„œ ì‘ì„± |
| 2026-01-09 | OCI ë°°í¬ ì™„ë£Œ, SSL ì„¤ì • ì™„ë£Œ |
| 2026-01-09 | Vercel í™˜ê²½ë³€ìˆ˜ `LIVEKIT_URL` ì¶”ê°€, ì¤‘ë³µ í”„ë¡œì íŠ¸ ì •ë¦¬ |
| 2026-01-09 | ëª¨ë‹ˆí„°ë§ ì•„í‚¤í…ì²˜ ì„¹ì…˜ ì¶”ê°€ - 2íŠ¸ë™ êµ¬ì¡°, ë°ì´í„° ì†ŒìŠ¤ ë¬¸ì„œí™” |

---

## 14. ì°¸ê³  ìë£Œ

- [Oracle Cloud Free Tier](https://www.oracle.com/cloud/free/)
- [LiveKit Self-hosting](https://docs.livekit.io/realtime/self-hosting/)
- [LiveKit Ports](https://docs.livekit.io/realtime/self-hosting/ports-firewall/)
- [Socket.io Documentation](https://socket.io/docs/v4/)
- [Caddy Server](https://caddyserver.com/docs/)
- [OCI Resource Manager](https://docs.oracle.com/en-us/iaas/Content/ResourceManager/home.htm)
- [Vercel CLI](https://vercel.com/docs/cli)
