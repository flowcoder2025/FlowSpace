# FlowSpace 에셋 및 개선 계획

> **작성일**: 2025-12-25
> **목적**: 에셋 검토 결과 및 임시 적용 계획 백업

---

## 1. 현재 코드베이스 상태

### 1.1 전체 완성도

| 영역 | 완성도 | 상태 |
|-----|--------|------|
| API 라우트 | 31개 중 30개 | ✅ (CSV 내보내기 제외) |
| 게임 엔진 | 12개 모듈 | ✅ 완료 |
| 빌드 상태 | 성공 | ✅ (경고 9개, 에러 0) |
| 채팅 시스템 | 최적화 완료 | ✅ (2025-12-19) |
| 전체 MVP | ~85% | ⚠️ |

### 1.2 미구현 항목

**높음**
| 항목 | 상태 | 비고 |
|-----|------|------|
| CSV 내보내기 | ❌ 미구현 | API 라우트 없음 |
| 오브젝트 상호작용 연결 | ⚠️ 부분 | 핸들러 미연결 |
| 반응형 디자인 | ❌ ~30% | 모바일 미지원 |

**중간**
| 항목 | 상태 | 비고 |
|-----|------|------|
| 템플릿 맵 에셋 | ⚠️ 부분 | 에셋 미완성 |
| 에러 바운더리 | ⚠️ 부분 | 전역 핸들러 부족 |
| 구독 플랜 UI | ❌ 미구현 | Stripe 미연동 |

---

## 2. 에셋 분석 결과

### 2.1 사용 가능한 에셋 (5개 파일)

| 파일 | 위치 | 내용 | 템플릿 매칭 |
|-----|------|------|------------|
| **1.jpeg** | `public/assets/game/test/` | 오피스 (책상, 파티션, 컴퓨터, **캐릭터**) | OFFICE ⭐ |
| **2.png** | `public/assets/game/test/` | 교실 (책상, 칠판, 책장, 사물함) | CLASSROOM |
| **3.png** | `public/assets/game/test/` | 야외 (잔디, 나무, 울타리, 물) | LOUNGE/공원 |
| **4.png** | `public/assets/game/test/` | 추가 오브젝트 (사물함, 자판기, 지도) | 공통 |
| **5.png** | `public/assets/game/test/` | 바닥 타일 6종 | 모든 템플릿 |

### 2.2 에셋 상세 분석

#### 1.jpeg (오피스) - 핵심 에셋
- 캐릭터 스프라이트 (4방향: 앞/뒤/좌/우)
- 오피스 파티션 (상단/하단 뷰)
- 컴퓨터 데스크 세트 (모니터+키보드)
- 오피스 의자 (주황색 회전의자)
- 마스코트 캐릭터 (닭)

#### 2.png (교실)
- 벽돌 벽, 바닥 타일
- 책상 (4종 변형)
- 의자 (2종)
- 칠판, 화이트보드
- 책장 (2종), 사물함
- 지구본, 시계, 화분
- 포스터, 프로젝터, 어항

#### 3.png (야외)
- 잔디 타일 (4종)
- 물 타일, 연못
- 돌담, 나무 울타리
- 나무 (2종), 덤불, 바위
- 나무 상자, 통, 표지판

#### 4.png (추가 오브젝트)
- 실험대, 해골 모형
- 컴퓨터 데스크, 스피커
- 마이크, 연단, 이젤
- 사물함 (열린/닫힌)
- 세계 지도, 자판기
- 소화기, 대걸레, 양동이

#### 5.png (바닥 타일)
- 대리석 타일 (흰색)
- 회색 타일
- 나무 바닥 (2종)
- 파란색 타일
- 테라코타 타일

### 2.3 템플릿별 커버리지

| 템플릿 | 커버리지 | 부족한 요소 |
|-------|---------|------------|
| **OFFICE** | 90% | 회의실 테이블, 화이트보드 |
| **CLASSROOM** | 85% | 강단, 프로젝터 스크린 |
| **LOUNGE** | 70% | 소파, 바 테이블, 게임기 |

---

## 3. 수정된 우선순위

### 3.1 작업 순서 (의존성 고려)

| 순서 | 작업 | 이유 | 예상 시간 |
|:---:|-----|------|----------|
| **1** | `/docs` 문서 업데이트 | 현재 상태 정리 필수 | 2-3시간 |
| **2** | 빌드 경고 정리 | 코드 품질 기반 작업 | 1시간 |
| **3** | CSV 내보내기 | PRD 명시 기능, 에셋 불필요 | 4-6시간 |
| **4** | **맵/캐릭터 에셋 제작** | 게임 시각화 기반 | 10-14시간 |
| **5** | 오브젝트 상호작용 연결 | 에셋 완성 후 적용 | 8-12시간 |
| **6** | 반응형 디자인 | 게임 완성 후 최적화 | 16-24시간 |

### 3.2 작업 흐름

```
문서 정리 → 코드 정리 → CSV 내보내기
                              ↓
                     맵/캐릭터 에셋 제작
                              ↓
                     오브젝트 상호작용 연결
                              ↓
                        반응형 디자인
```

---

## 4. 에셋 가공 계획

### 4.1 도구 비교

| 도구 | 타입 | 장점 | 단점 | 추천 |
|-----|------|------|------|:----:|
| **TexturePacker** | GUI (유료) | 최고 품질, 자동 최적화 | $40 | ⭐⭐⭐⭐⭐ |
| **ShoeBox** | GUI (무료) | 무료, 자동 스프라이트 추출 | 오래됨 | ⭐⭐⭐⭐ |
| **Tiled** | GUI (무료) | 맵+타일셋 통합 관리 | 학습 필요 | ⭐⭐⭐⭐⭐ |
| **Sharp** | CLI (무료) | 자동화 가능, 빠름 | 수동 좌표 지정 | ⭐⭐⭐ |

### 4.2 추천 워크플로우

**최고 품질 (GUI 도구 사용)**:
```
1. Tiled에서 에셋 이미지를 타일셋으로 등록
2. 타일셋에서 개별 타일 정의 (드래그로 선택)
3. 맵 레이아웃 직접 구성
4. JSON 내보내기 → Phaser에서 로드
```

### 4.3 필요 작업

| 단계 | 작업 | 도구 | 예상 시간 |
|:---:|------|------|----------|
| 1 | 스프라이트 개별 추출 | Sharp/ImageMagick | 2-3시간 |
| 2 | 타일셋 정규화 (32x32 또는 64x64) | Tiled | 2-3시간 |
| 3 | Phaser Atlas JSON 생성 | TexturePacker | 1-2시간 |
| 4 | 맵 레이아웃 구성 | Tiled | 4-6시간 |

---

## 5. 임시 적용 계획 (빠른 퀄리티 확인)

### 5.1 목표
- 작은 테스트 맵 (10x10 또는 15x15)
- 기존 이미지를 스프라이트 시트로 직접 사용
- Phaser의 `addFrame` 또는 crop 기능 활용

### 5.2 테스트 구성

```
테스트 맵 구성:
┌─────────────────────────────┐
│ 바닥: 5.png (나무 바닥)       │
│ 오브젝트: 1.jpeg (오피스 책상) │
│ 캐릭터: 1.jpeg (캐릭터 추출)   │
└─────────────────────────────┘
```

### 5.3 파일 구조

```
public/assets/game/
├── test/                    # 원본 에셋
│   ├── 1.jpeg              # 오피스 + 캐릭터
│   ├── 2.png               # 교실
│   ├── 3.png               # 야외
│   ├── 4.png               # 추가 오브젝트
│   └── 5.png               # 바닥 타일
├── sprites/                 # 기존 캐릭터 스프라이트
└── preview/                 # 테스트용 가공 에셋 (신규)
```

---

## 6. 기존 캐릭터 스프라이트

현재 `public/assets/game/sprites/`에 8색상 캐릭터 존재:
- character-default.png
- character-blue.png
- character-green.png
- character-orange.png
- character-pink.png
- character-purple.png
- character-red.png
- character-yellow.png

---

## 7. 빌드 경고 목록 (정리 필요)

| 파일 | 경고 내용 |
|-----|----------|
| `mute/route.ts:36` | `updatedMember` 미사용 |
| `dashboard/.../page.tsx:120` | `router` 미사용 |
| `[inviteCode]/page.tsx` | `Grid`, `GridItem`, `CardDescription` 미사용 |
| `MemberList.tsx:247` | `displayInfo` 미사용 |
| `ChatInputArea.tsx:21` | `ParsedInput` 미사용 |
| `ChatMessageList.tsx:21` | `ContentSegment` 미사용 |
| `FloatingChatOverlay.tsx:73` | `spaceId` 미사용 |
| `EditorPanel.tsx:24` | `CategoryConfig` 미사용 |

---

## 8. 참고 문서

- PRD: `/docs/prd.md`
- 기존 분석: `/backup.md`, `/IMPROVEMENTS.md`
- DB 스키마: `/prisma/schema.prisma`
- 공간 모듈 가이드: `/src/features/space/claude.md`

---

*이 문서는 2025-12-25 Windows 환경 전환 후 작성되었습니다.*
