# TASK: ë©¤ë²„ì‹­ ì‹œìŠ¤í…œ ë° ì—­í• ë³„ ëŒ€ì‹œë³´ë“œ ê°œì„ 

> **ìƒíƒœ**: ğŸŸ¢ ì§„í–‰ ì¤‘
> **ì‹œì‘ì¼**: 2025-12-12
> **ì˜ˆìƒ ì™„ë£Œ**: Phaseë³„ ì ì§„ì  êµ¬í˜„

---

## ğŸ“‹ ë¬¸ì œ ì •ì˜

í˜„ì¬ ì‹œìŠ¤í…œì˜ êµ¬ì¡°ì  ë¬¸ì œ:

| ë¬¸ì œ | í˜„ì¬ ìƒíƒœ | í•„ìš”í•œ ìƒíƒœ |
|-----|----------|------------|
| ìš´ì˜ì ëŒ€ì‹œë³´ë“œ ì ‘ê·¼ | ë¡œê·¸ì¸í•œ ëˆ„êµ¬ë‚˜ /admin ì ‘ê·¼ ê°€ëŠ¥ | SuperAdminë§Œ ì ‘ê·¼ ê°€ëŠ¥ |
| ê³µê°„ ê´€ë¦¬ì ë·° | ëª¨ë“  ê³µê°„ í‘œì‹œ | ë³¸ì¸ ì†Œìœ  ê³µê°„ë§Œ í‘œì‹œ |
| ë©¤ë²„ ë·° | ì—†ìŒ | ë³¸ì¸ì´ ë©¤ë²„ì¸ ê³µê°„ ëª©ë¡ |
| ë©¤ë²„ì‹­ ìƒì„± | ìˆ˜ë™/ì—†ìŒ | URL ì…ì¥ ì‹œ ìë™ ìƒì„± |
| ì±„íŒ…/ì´ë¦„ ê´€ë¦¬ | ê³µê°„ ë‚´ë¶€ë§Œ | ë©¤ë²„ì‹­ ê¸°ë°˜ ì˜ì†ì  ê´€ë¦¬ |

---

## ğŸ¯ ëª©í‘œ

1. **ì—­í• ë³„ ëŒ€ì‹œë³´ë“œ ë¶„ë¦¬**
   - `/admin` â†’ SuperAdmin ì „ìš© (í”Œë«í¼ ì „ì²´ ê´€ë¦¬)
   - `/dashboard` â†’ Owner/Staffìš© (ë³¸ì¸ ê´€ë¦¬ ê³µê°„)
   - `/my-spaces` â†’ Memberìš© (ì°¸ì—¬ ì¤‘ì¸ ê³µê°„ ëª©ë¡)

2. **ìë™ ë©¤ë²„ì‹­ ìƒì„±**
   - `/spaces/[inviteCode]` ì…ì¥ ì‹œ SpaceMember ìë™ ìƒì„±
   - ì¸ì¦ ì‚¬ìš©ìëŠ” userId ê¸°ë°˜, ê²ŒìŠ¤íŠ¸ëŠ” guestSessionId ê¸°ë°˜

3. **ê¶Œí•œ ì²´ê³„ ì •ë¦½**
   - API ë ˆë²¨ì—ì„œ ì—­í•  ê²€ì¦
   - Socket ì„œë²„ì—ì„œ ë©¤ë²„ì‹­ ê¸°ë°˜ ê¶Œí•œ í™•ì¸

---

## ğŸ“ Phase 1: ìë™ ë©¤ë²„ì‹­ ìƒì„±

> **ëª©í‘œ**: URL ì…ì¥ ì‹œ SpaceMember ë ˆì½”ë“œ ìë™ ìƒì„±

### 1.1 ìˆ˜ì •í•  íŒŒì¼

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|-----|----------|
| `src/app/space/[id]/page.tsx` | ì…ì¥ ì‹œ ë©¤ë²„ì‹­ ìƒì„± API í˜¸ì¶œ |
| `src/app/api/spaces/[id]/join/route.ts` | ğŸ†• ë©¤ë²„ì‹­ ìƒì„± API |
| `server/socket-server.ts` | join:spaceì—ì„œ ë©¤ë²„ì‹­ í™•ì¸/ìƒì„± |

### 1.2 êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] `/api/spaces/[id]/join` POST API ìƒì„± âœ…
  - ì¸ì¦ ì‚¬ìš©ì: userIdë¡œ SpaceMember ì¡°íšŒ/ìƒì„±
  - ê²ŒìŠ¤íŠ¸: guestSessionTokenìœ¼ë¡œ SpaceMember ì¡°íšŒ/ìƒì„±
  - ì´ë¯¸ ì¡´ì¬í•˜ë©´ ê¸°ì¡´ ë©¤ë²„ì‹­ ë°˜í™˜
- [x] `page.tsx`ì—ì„œ ê³µê°„ ì…ì¥ ì‹œ join API í˜¸ì¶œ âœ…
- [ ] Socket join:spaceì—ì„œ ë©¤ë²„ì‹­ ID í™•ì¸ (ì„ íƒì )

### 1.3 ê²€ì¦ í•­ëª©

- [ ] ë¡œê·¸ì¸ ì‚¬ìš©ì ì²« ì…ì¥ â†’ SpaceMember ìƒì„± (role: PARTICIPANT)
- [ ] ì¬ì…ì¥ ì‹œ ê¸°ì¡´ ë©¤ë²„ì‹­ ìœ ì§€
- [ ] ê³µê°„ ì†Œìœ ì ì…ì¥ â†’ OWNER ì—­í• ë¡œ ë©¤ë²„ì‹­ ìƒì„±

---

## ğŸ“ Phase 2: SuperAdmin ì „ìš© /admin ëŒ€ì‹œë³´ë“œ

> **ëª©í‘œ**: /adminì€ isSuperAdmin=trueì¸ ì‚¬ìš©ìë§Œ ì ‘ê·¼

### 2.1 ìˆ˜ì •í•  íŒŒì¼

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|-----|----------|
| `src/app/admin/page.tsx` | SuperAdmin ì²´í¬ ì¶”ê°€ |
| `src/app/admin/layout.tsx` | ğŸ†• ë ˆì´ì•„ì›ƒì—ì„œ ê¶Œí•œ ê²€ì¦ |
| `src/app/api/admin/*` | APIì— SuperAdmin ì²´í¬ ì¶”ê°€ |
| `src/lib/auth.ts` | isSuperAdmin í—¬í¼ í•¨ìˆ˜ |

### 2.2 êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `isSuperAdmin(userId)` í—¬í¼ í•¨ìˆ˜ ìƒì„±
- [ ] `/admin/layout.tsx` ìƒì„± - ê¶Œí•œ ì—†ìœ¼ë©´ ë¦¬ë‹¤ì´ë ‰íŠ¸
- [ ] `/api/admin/*` ëª¨ë“  APIì— SuperAdmin ì²´í¬
- [ ] ê¶Œí•œ ì—†ëŠ” ì‚¬ìš©ì ì ‘ê·¼ ì‹œ 403 ë˜ëŠ” /dashboardë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

### 2.3 ê²€ì¦ í•­ëª©

- [ ] SuperAdmin ì•„ë‹Œ ì‚¬ìš©ì /admin ì ‘ê·¼ â†’ ë¦¬ë‹¤ì´ë ‰íŠ¸
- [ ] SuperAdmin API í˜¸ì¶œ ì‹œ ê¶Œí•œ ê²€ì¦

---

## ğŸ“ Phase 3: Owner/Staffìš© /dashboard

> **ëª©í‘œ**: ê³µê°„ Owner/Staffê°€ ë³¸ì¸ ê´€ë¦¬ ê³µê°„ë§Œ ë³¼ ìˆ˜ ìˆëŠ” ëŒ€ì‹œë³´ë“œ

### 3.1 ìˆ˜ì •í•  íŒŒì¼

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|-----|----------|
| `src/app/dashboard/page.tsx` | ğŸ†• Owner/Staff ëŒ€ì‹œë³´ë“œ |
| `src/app/dashboard/spaces/[id]/page.tsx` | ğŸ†• ê°œë³„ ê³µê°„ ê´€ë¦¬ |
| `src/app/api/dashboard/spaces/route.ts` | ğŸ†• ë³¸ì¸ ê´€ë¦¬ ê³µê°„ ëª©ë¡ API |
| `src/app/api/dashboard/spaces/[id]/stats/route.ts` | ğŸ†• ê³µê°„ë³„ í†µê³„ API |

### 3.2 êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `/api/dashboard/spaces` - ë³¸ì¸ì´ OWNER/STAFFì¸ ê³µê°„ ëª©ë¡
- [ ] `/dashboard` í˜ì´ì§€ - ê´€ë¦¬ ê³µê°„ ëª©ë¡ í‘œì‹œ
- [ ] `/dashboard/spaces/[id]` - ê°œë³„ ê³µê°„ ìƒì„¸ ê´€ë¦¬
- [ ] ê³µê°„ë³„ í†µê³„ (ë°©ë¬¸ì, ì±„íŒ… ìˆ˜, ë©¤ë²„ ìˆ˜)

### 3.3 ê²€ì¦ í•­ëª©

- [ ] OwnerëŠ” ë³¸ì¸ ì†Œìœ  ê³µê°„ë§Œ í‘œì‹œ
- [ ] StaffëŠ” ë³¸ì¸ì´ Staffì¸ ê³µê°„ë§Œ í‘œì‹œ
- [ ] ë‹¤ë¥¸ ì‚¬ìš©ì ê³µê°„ ì ‘ê·¼ ë¶ˆê°€

---

## ğŸ“ Phase 4: Memberìš© /my-spaces

> **ëª©í‘œ**: ì¼ë°˜ ë©¤ë²„ê°€ ì°¸ì—¬ ì¤‘ì¸ ê³µê°„ ëª©ë¡ í™•ì¸

### 4.1 ìˆ˜ì •í•  íŒŒì¼

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|-----|----------|
| `src/app/my-spaces/page.tsx` | ğŸ†• ë‚´ ê³µê°„ ëª©ë¡ |
| `src/app/api/my-spaces/route.ts` | ğŸ†• ì°¸ì—¬ ê³µê°„ ëª©ë¡ API |

### 4.2 êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `/api/my-spaces` - SpaceMemberë¡œ ì—°ê²°ëœ ê³µê°„ ëª©ë¡
- [ ] `/my-spaces` í˜ì´ì§€ - ì°¸ì—¬ ê³µê°„ ì¹´ë“œ ëª©ë¡
- [ ] ê° ê³µê°„ ì¹´ë“œì—ì„œ ë°”ë¡œ ì…ì¥ ê°€ëŠ¥
- [ ] ì—­í• ë³„ ë±ƒì§€ í‘œì‹œ (Owner/Staff/Member)

### 4.3 ê²€ì¦ í•­ëª©

- [ ] ë©¤ë²„ì‹­ì´ ìˆëŠ” ê³µê°„ë§Œ í‘œì‹œ
- [ ] ì—­í• ì— ë”°ë¥¸ UI ì°¨ì´ (ê´€ë¦¬ ë²„íŠ¼ ë“±)

---

## ğŸ“ Phase 5: ë„¤ë¹„ê²Œì´ì…˜ í†µí•©

> **ëª©í‘œ**: ì—­í• ì— ë”°ë¥¸ ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ ë¶„ê¸°

### 5.1 êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] í—¤ë”ì— ì—­í• ë³„ ë„¤ë¹„ê²Œì´ì…˜ ë§í¬
  - SuperAdmin: /admin ë§í¬ í‘œì‹œ
  - Owner/Staff: /dashboard ë§í¬ í‘œì‹œ
  - ëª¨ë“  ì‚¬ìš©ì: /my-spaces ë§í¬ í‘œì‹œ
- [ ] ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ìƒíƒœì— ë”°ë¥¸ ë©”ë‰´ ë³€ê²½

---

## ğŸ“Š ì§„í–‰ ìƒíƒœ

| Phase | ìƒíƒœ | ì™„ë£Œì¼ |
|-------|------|-------|
| Phase 1: ìë™ ë©¤ë²„ì‹­ | ğŸŸ¢ ì§„í–‰ ì¤‘ (API + page.tsx ì™„ë£Œ) | - |
| Phase 2: SuperAdmin /admin | â³ ëŒ€ê¸° | - |
| Phase 3: Owner /dashboard | â³ ëŒ€ê¸° | - |
| Phase 4: Member /my-spaces | â³ ëŒ€ê¸° | - |
| Phase 5: ë„¤ë¹„ê²Œì´ì…˜ í†µí•© | â³ ëŒ€ê¸° | - |

---

## ğŸ“ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì‚¬ìš©ì ì—­í•                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  SuperAdmin (isSuperAdmin=true)                             â”‚
â”‚  â””â”€â”€ /admin (í”Œë«í¼ ì „ì²´ ê´€ë¦¬)                               â”‚
â”‚      â””â”€â”€ ëª¨ë“  ê³µê°„, ëª¨ë“  ì‚¬ìš©ì, ì‹œìŠ¤í…œ ì„¤ì •                   â”‚
â”‚                                                             â”‚
â”‚  Owner (Space.ownerId = userId)                             â”‚
â”‚  â””â”€â”€ /dashboard (ë³¸ì¸ ì†Œìœ  ê³µê°„ ê´€ë¦¬)                         â”‚
â”‚      â””â”€â”€ ê³µê°„ ì„¤ì •, ë©¤ë²„ ê´€ë¦¬, í†µê³„                           â”‚
â”‚                                                             â”‚
â”‚  Staff (SpaceMember.role = STAFF)                           â”‚
â”‚  â””â”€â”€ /dashboard (Staffë¡œ ì§€ì •ëœ ê³µê°„ ê´€ë¦¬)                    â”‚
â”‚      â””â”€â”€ ë©¤ë²„ ê´€ë¦¬, ì±„íŒ… ê´€ë¦¬ (ì œí•œì )                         â”‚
â”‚                                                             â”‚
â”‚  Member (SpaceMember.role = PARTICIPANT)                    â”‚
â”‚  â””â”€â”€ /my-spaces (ì°¸ì—¬ ê³µê°„ ëª©ë¡)                              â”‚
â”‚      â””â”€â”€ ì…ì¥, ì±„íŒ… ê¸°ë¡ í™•ì¸                                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ë³€ê²½ ì´ë ¥

| ë‚ ì§œ | ë‚´ìš© |
|-----|------|
| 2025-12-12 | Phase 1 API êµ¬í˜„ - `/api/spaces/[id]/join` + page.tsx ì—°ë™ |
| 2025-12-12 | Phase 7 ê³„íš ìˆ˜ë¦½ - ë©¤ë²„ì‹­ ì‹œìŠ¤í…œ ê°œì„  |
